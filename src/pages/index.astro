---
import "../styles/global.css";
import NoticeBuilder from "../components/NoticeBuilder";
import SeoHead from "../components/SeoHead.astro";
import { getBuildingOptions } from "../data/buildings";
import { parseBuildingKeys } from "../lib/access";

const env = Astro.locals.runtime?.env ?? {};
const buildingKeys = parseBuildingKeys(env.BUILDING_KEYS_JSON);
const buildingOptions = getBuildingOptions(buildingKeys);
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <SeoHead
      title="Building Ledger | Resident issue tracker and notice builder"
      description="Track building repair issues, add me too reports, and create neutral notice drafts with simple forms."
      canonicalPath="/"
    />
  </head>
  <body>
    <main class="page" id="main">
      <section class="panel panel-highlight home-intro-panel" aria-labelledby="home-title">
        <div class="home-intro-copy">
          <p class="eyebrow">Building ledger</p>
          <h1 id="home-title">Track building repair issues</h1>
          <p class="helper">Keep a private log of what residents can observe.</p>
          <p class="helper">Use short facts and dates. Do not include names or unit numbers.</p>
        </div>
        <div class="home-intro-metrics" aria-label="Main features">
          <p><strong>Private by default</strong><span>Evidence stays resident-only.</span></p>
          <p><strong>Simple forms</strong><span>Short steps with clear choices.</span></p>
          <p><strong>Calm notices</strong><span>Neutral wording in two levels of English.</span></p>
        </div>
        <ul class="home-intro-list" aria-label="How it works">
          <li>Choose the issue type.</li>
          <li>Add "Me too" reports.</li>
          <li>Generate a calm repair notice.</li>
        </ul>
      </section>

      <NoticeBuilder
        client:load
        buildingOptions={buildingOptions}
      />
    </main>
  </body>
</html>
